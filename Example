-- // DARK UI LIBRARY (Improved Version by ChatGPT)

local TweenService = game:GetService("TweenService")
local RunService = game:GetService("RunService")
local UserInputService = game:GetService("UserInputService")
local Players = game:GetService("Players")
local LocalPlayer = Players.LocalPlayer
local Mouse = LocalPlayer:GetMouse()

-- // Theme system
local Theme = {
    Background = Color3.fromRGB(28, 28, 28),
    Secondary = Color3.fromRGB(33, 33, 33),
    Accent = Color3.fromRGB(80, 70, 255),
    Text = Color3.fromRGB(195, 195, 195),
    Hover = Color3.fromRGB(43, 43, 43),
    Stroke = Color3.fromRGB(76, 76, 76),
    Success = Color3.fromRGB(32, 202, 106),
    Error = Color3.fromRGB(202, 70, 70)
}

local Library = {}
Library.Theme = Theme

-- // Root GUI
local dark_UI = Instance.new("ScreenGui")
dark_UI.Name = "dark_UI"
dark_UI.IgnoreGuiInset = true
dark_UI.ResetOnSpawn = false
dark_UI.ZIndexBehavior = Enum.ZIndexBehavior.Sibling
dark_UI.Parent = LocalPlayer:WaitForChild("PlayerGui")

-- // Simple fade-in
dark_UI.Enabled = false
task.wait()
dark_UI.Enabled = true

-- // Create main window
function Library:Create(config)
    local windowName = config.Name or "DarkUI"

    local main = Instance.new("Frame")
    main.Size = UDim2.fromOffset(500, 320)
    main.Position = UDim2.new(0.5, -250, 0.5, -160)
    main.BackgroundColor3 = Theme.Background
    main.AnchorPoint = Vector2.new(0.5, 0.5)
    main.Parent = dark_UI

    local corner = Instance.new("UICorner", main)
    corner.CornerRadius = UDim.new(0, 8)

    -- Drop shadow
    local shadow = Instance.new("ImageLabel")
    shadow.Name = "shadow"
    shadow.Image = "rbxassetid://297774371"
    shadow.ImageColor3 = Color3.fromRGB(10, 10, 10)
    shadow.ImageTransparency = 0.4
    shadow.SliceCenter = Rect.new(20, 20, 280, 280)
    shadow.Size = UDim2.fromScale(1.1, 1.1)
    shadow.ZIndex = -1
    shadow.BackgroundTransparency = 1
    shadow.Parent = main

    -- Title
    local title = Instance.new("TextLabel")
    title.Size = UDim2.new(1, 0, 0, 40)
    title.BackgroundTransparency = 1
    title.Font = Enum.Font.GothamBold
    title.Text = windowName
    title.TextSize = 20
    title.TextColor3 = Theme.Text
    title.Parent = main

    -- Tab container
    local tabBar = Instance.new("Frame")
    tabBar.Size = UDim2.new(1, -20, 0, 35)
    tabBar.Position = UDim2.fromOffset(10, 45)
    tabBar.BackgroundColor3 = Theme.Secondary
    tabBar.Parent = main
    Instance.new("UICorner", tabBar).CornerRadius = UDim.new(0, 6)

    local tabList = Instance.new("UIListLayout", tabBar)
    tabList.FillDirection = Enum.FillDirection.Horizontal
    tabList.Padding = UDim.new(0, 8)

    local tabs = {}

    -- // Dragging
    local dragging, dragStart, startPos
    title.InputBegan:Connect(function(input)
        if input.UserInputType == Enum.UserInputType.MouseButton1 then
            dragging = true
            dragStart = input.Position
            startPos = main.Position
        end
    end)

    title.InputEnded:Connect(function(input)
        if input.UserInputType == Enum.UserInputType.MouseButton1 then
            dragging = false
        end
    end)

    UserInputService.InputChanged:Connect(function(input)
        if dragging and input.UserInputType == Enum.UserInputType.MouseMovement then
            local delta = input.Position - dragStart
            main.Position = UDim2.new(startPos.X.Scale, startPos.X.Offset + delta.X, startPos.Y.Scale, startPos.Y.Offset + delta.Y)
        end
    end)

    -- // Tab creation
    function tabs:Tab(name)
        local button = Instance.new("TextButton")
        button.Size = UDim2.new(0, 100, 1, -8)
        button.Text = name
        button.Font = Enum.Font.Gotham
        button.TextColor3 = Theme.Text
        button.BackgroundTransparency = 1
        button.TextTransparency = 0.5
        button.TextSize = 14
        button.Parent = tabBar

        local container = Instance.new("Frame")
        container.Size = UDim2.new(1, -20, 1, -100)
        container.Position = UDim2.new(0, 10, 0, 85)
        container.BackgroundColor3 = Theme.Secondary
        container.Visible = false
        container.Parent = main
        Instance.new("UICorner", container).CornerRadius = UDim.new(0, 6)

        local holder = Instance.new("ScrollingFrame")
        holder.Size = UDim2.new(1, -10, 1, -10)
        holder.Position = UDim2.fromOffset(5, 5)
        holder.CanvasSize = UDim2.new(0, 0, 0, 0)
        holder.ScrollBarThickness = 3
        holder.BackgroundTransparency = 1
        holder.Parent = container

        local layout = Instance.new("UIListLayout", holder)
        layout.Padding = UDim.new(0, 5)

        -- Activate tab
        button.MouseButton1Click:Connect(function()
            for _,v in pairs(main:GetChildren()) do
                if v:IsA("Frame") and v ~= tabBar then
                    v.Visible = false
                end
            end
            for _,b in pairs(tabBar:GetChildren()) do
                if b:IsA("TextButton") then
                    TweenService:Create(b, TweenInfo.new(0.25), {TextTransparency = 0.5}):Play()
                end
            end
            TweenService:Create(button, TweenInfo.new(0.25), {TextTransparency = 0}):Play()
            container.Visible = true
        end)

        -- Element handler
        local Elements = {}

        function Elements:Label(text)
            local lbl = Instance.new("TextLabel")
            lbl.Text = text
            lbl.Size = UDim2.new(1, -10, 0, 28)
            lbl.Font = Enum.Font.Gotham
            lbl.TextColor3 = Theme.Text
            lbl.BackgroundColor3 = Theme.Secondary
            lbl.BackgroundTransparency = 0.3
            lbl.TextXAlignment = Enum.TextXAlignment.Left
            lbl.Parent = holder
            Instance.new("UICorner", lbl).CornerRadius = UDim.new(0, 6)
        end

        function Elements:Button(text, callback)
            callback = callback or function() end
            local btn = Instance.new("TextButton")
            btn.Size = UDim2.new(1, -10, 0, 32)
            btn.BackgroundColor3 = Theme.Secondary
            btn.Text = text
            btn.TextColor3 = Theme.Text
            btn.Font = Enum.Font.Gotham
            btn.TextSize = 14
            btn.AutoButtonColor = false
            btn.Parent = holder
            Instance.new("UICorner", btn).CornerRadius = UDim.new(0, 6)
            btn.MouseEnter:Connect(function()
                TweenService:Create(btn, TweenInfo.new(0.2), {BackgroundColor3 = Theme.Hover}):Play()
            end)
            btn.MouseLeave:Connect(function()
                TweenService:Create(btn, TweenInfo.new(0.2), {BackgroundColor3 = Theme.Secondary}):Play()
            end)
            btn.MouseButton1Click:Connect(callback)
        end

        return Elements
    end

    -- // Notification system
    function Library:Notify(text, color)
        local note = Instance.new("TextLabel")
        note.Size = UDim2.fromOffset(250, 40)
        note.Position = UDim2.new(1, -270, 1, -60)
        note.BackgroundColor3 = color or Theme.Accent
        note.Text = text
        note.TextColor3 = Color3.new(1, 1, 1)
        note.Font = Enum.Font.GothamBold
        note.TextSize = 14
        note.Parent = dark_UI
        Instance.new("UICorner", note)
        TweenService:Create(note, TweenInfo.new(0.3), {Position = UDim2.new(1, -270, 1, -110)}):Play()
        task.wait(2.5)
        TweenService:Create(note, TweenInfo.new(0.3), {BackgroundTransparency = 1, TextTransparency = 1}):Play()
        task.wait(0.3)
        note:Destroy()
    end

    return tabs
end

return Library
